<template>
    <require from="../grid/grid"></require>
    <require from="../table-button-editor.css"></require>
    <div class="pmd-card-body col-lg-7 col-md-12 button-editor">
        <div class="row form-group">
            <div class="col-md-5 col-sm-12">Текст кнопки</div>

            <div class="col-md-7 col-sm-12">
                <input
                    value.bind="tableButton.Text"
                    type="text"
                    class="form-control"
                ></input>
            </div>
        </div>

        <div class="row form-group">
            <div class="col-md-5 col-sm-12">Заголовок страницы</div>

            <div class="col-md-7 col-sm-12">
                <input
                    value.bind="tableButton.Table.Title"
                    type="text"
                    class="form-control"
                ></input>
            </div>
        </div>

        <div class="row form-group">
            <div class="col-md-5 col-sm-12">
                Сообщение на экране печати документа
            </div>

            <div class="col-md-7 col-sm-12">
                <input
                    value.bind="tableButton.Table.Message"
                    type="text"
                    class="form-control"
                ></input>
            </div>
        </div>

        <div class="row form-group">
            <div class="col-md-5 col-sm-12">Колонка дата/время</div>

            <div class="col-md-1">
                <label class="pmd-checkbox">
                    <input
                        checked.bind="tableButton.Table.Common.DateTimeColumnExists" 
                        change.delegate="onDateTimeChecked($event.target.checked)"
                        type="checkbox"
                        class="pm-ini"
                    ></input>

                    <span class="pmd-checkbox-label"></span>
                </label>
            </div>

            <div class="col-md-5 col-sm-12">
                <select
                     class="form-control au-target"
                    value.bind="tableButton.Table.Common.DateTimeColumn"
                    disabled.bind="tableButton.Table.Common.DateTimeColumn == null"
                    change.delegate="onDateTimeColumnChanged()"
                >
                    <option
                        repeat.for="dateTimeOption of dateTimeTypes"
                        model.bind="dateTimeOption.value"
                        hidden.bind="dateTimeOption.value == null"
                    >${dateTimeOption.name}</option>
                </select>
            </div>
        </div>

        <div class="row form-group">
            <div class="col-md-5 col-sm-12">Колонка файл для печати</div>

            <div class="col-md-2">
                <label class="pmd-checkbox">
                    <input
                        change.delegate="onFileToPrintChecked($event.target.checked)"
                        checked.bind="tableButton.Table.Common.PrintFileColumn"
                        type="checkbox"
                        class="pm-ini"
                    ></input>

                    <span class="pmd-checkbox-label"></span>
                </label>
            </div>
        </div>

        <div class="row form-group">
            <div class="col-md-5 col-sm-12">Документ для печати</div>

            <div class="col-md-1">
                <label class="pmd-checkbox">
                    <input
                        change.delegate="onDocumentToPrintChecked(tableButton)"
                        checked.bind="showDocumentForPrint"
                        type="checkbox"
                        class="pm-ini"
                    ></input>

                    <span class="pmd-checkbox-label"></span>
                </label>
            </div>

            <div class="col-md-6 col-sm-12">
                <select
                    value.bind="tableButton.Table.PrintDocument"
                    disabled.bind="!showDocumentForPrint"
                    class="form-control"
                >
                    <option value=""></option>
                    <option repeat.for="printFile of printFileList">${printFile.FileName}</option>
                </select>
            </div>
        </div>

        <div class="row form-group">
            <div class="col-md-5 col-sm-12">Количество колонок</div>

            <div class="col-xs-2">
                <input
                    value.bind="tableButton.Table.Common.ColumnsCountString"
                    change.delegate="changeColumnsCount()"
                    type="number"
                    min="0" 
                    class="form-control"
                ></input>
            </div>
        </div>
    </div>
<!-- Дополнительные переменные нужны для того чтоб использовать грид в двух редакторах -->
    <div class="pmd-card-body col-md-12 button-editor">
        <grid view-model.ref="grid"
            edit-percent-row.bind="editPercentRow"
            print-file-list.bind="printFileList"
            table-button.bind="tableButton"
            row-to-add.bind="rowToAdd"
            date-time-column.bind="tableButton.Table.Common.DateTimeColumn"
            columns-count.bind="tableButton.Table.Common.ColumnsCount"
            print-file-column.bind="tableButton.Table.Common.PrintFileColumn"
        ></grid>
    </div>
</template>